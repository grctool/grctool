# Exit Gates for Frame Phase
# These criteria must be met before proceeding to the Design phase

exit_gates:
  # Documentation Completeness
  - criteria: PRD is complete and approved
    required: true
    validation:
      - Executive summary written
      - Problem statement clearly defined
      - Success metrics are specific and measurable
      - All stakeholders have reviewed and signed off
    evidence: docs/helix/01-frame/prd.md

  - criteria: All P0 requirements have specifications
    required: true
    validation:
      - Each P0 requirement has a corresponding feature specification
      - No [NEEDS CLARIFICATION] markers remain in P0 specs
      - Acceptance criteria defined for all P0 features
    evidence: docs/helix/01-frame/features/

  - criteria: User personas validated with actual data
    required: true
    validation:
      - Primary persona based on user research or interviews
      - Specific scenarios documented for each persona
      - Pain points are quantified where possible
    evidence: docs/helix/01-frame/prd.md#users-and-personas

  - criteria: Success metrics are measurable
    required: true
    validation:
      - Each metric has a baseline value
      - Each metric has a target value
      - Measurement method is specified
      - Timeline for achievement is defined
    evidence: docs/helix/01-frame/prd.md#success-metrics

  - criteria: Project principles are established
    required: true
    validation:
      - Core principles documented
      - Technology constraints defined
      - Quality standards specified
      - Exception handling process defined
    evidence: docs/helix/01-frame/principles.md

  - criteria: Feature registry is initialized
    required: true
    validation:
      - All features have unique FEAT-XXX identifiers
      - Dependencies between features documented
      - Priority (P0/P1/P2) assigned to each feature
      - Owner assigned to each feature
    evidence: docs/helix/01-frame/feature-registry.md

  - criteria: User stories created for P0 features
    required: true
    validation:
      - Stories follow "As a... I want... So that..." format
      - Acceptance criteria use Given/When/Then format
      - Definition of Done specified
      - Stories are estimated (optional but recommended)
    evidence: docs/helix/01-frame/user-stories/

  - criteria: Risk assessment completed
    required: false
    validation:
      - Major risks identified
      - Risk probability and impact assessed
      - Mitigation strategies defined
      - Risk owners assigned
    evidence: docs/helix/01-frame/risk-register.md

  - criteria: Stakeholder alignment achieved
    required: false
    validation:
      - All key stakeholders identified
      - RACI matrix completed
      - Communication plan established
      - Escalation path defined
    evidence: docs/helix/01-frame/stakeholder-map.md

  - criteria: Scope boundaries are clear
    required: true
    validation:
      - In-scope items explicitly listed
      - Out-of-scope items explicitly listed
      - Dependencies on external systems identified
      - Timeline and resource constraints acknowledged
    evidence: docs/helix/01-frame/prd.md#scope

  # Quality Gates
  - criteria: No ambiguous requirements
    required: true
    validation:
      - All requirements are testable
      - Vague terms like "fast" or "user-friendly" are quantified
      - Edge cases are identified and documented
    evidence: docs/helix/01-frame/features/

  - criteria: Assumptions and constraints documented
    required: false
    validation:
      - Technical assumptions listed
      - Business assumptions listed
      - Known constraints identified
      - Impact of assumptions assessed
    evidence: docs/helix/01-frame/assumptions-constraints.md

  # Process Gates
  - criteria: Validation checklist completed
    required: false
    validation:
      - All required artifacts created
      - Cross-references between documents verified
      - Consistency across artifacts confirmed
      - Quality review performed
    evidence: docs/helix/01-frame/validation-checklist.md

  - criteria: Glossary of terms established
    required: false
    validation:
      - Domain-specific terms defined
      - Acronyms expanded
      - Technical terms explained
      - Shared understanding confirmed
    evidence: docs/helix/01-frame/glossary.md

  # Security and Compliance Gates (Optional)
  - criteria: Security requirements defined
    required: false
    validation:
      - Security user stories documented
      - Authentication requirements specified
      - Data protection requirements identified
    evidence: docs/helix/01-frame/security-requirements.md

  - criteria: Threat model completed
    required: false
    validation:
      - Threat analysis performed
      - Risk assessment documented
      - Mitigation strategies identified
    evidence: docs/helix/01-frame/threat-model.md

  - criteria: Compliance requirements documented
    required: false
    validation:
      - Applicable regulations identified
      - Compliance matrix created
      - Data handling requirements specified
    evidence: docs/helix/01-frame/compliance-requirements.md

# Automated Validation Rules
validation_rules:
  - rule: no_clarification_markers
    description: No [NEEDS CLARIFICATION] markers in P0 specifications
    path: docs/helix/01-frame/features/
    pattern: "\\[NEEDS CLARIFICATION"
    expected: 0
    severity: blocking

  - rule: feature_ids_unique
    description: All FEAT-XXX IDs are unique
    path: docs/helix/01-frame/feature-registry.md
    check: unique_ids
    severity: blocking

  - rule: user_story_format
    description: User stories follow correct format
    path: docs/helix/01-frame/user-stories/
    pattern: "As a .* I want .* So that"
    expected: present
    severity: warning

  - rule: metrics_quantified
    description: Success metrics have numeric targets
    path: docs/helix/01-frame/prd.md
    check: metrics_have_numbers
    severity: blocking

# Phase Transition Criteria
transition:
  to_phase: 02-design
  approval_required: true
  approvers:
    - Product Owner
    - Technical Lead
    - Key Stakeholders

  pre_transition_tasks:
    - Archive Frame phase decisions
    - Communicate phase completion to team
    - Schedule Design phase kickoff
    - Ensure Design team has access to all Frame artifacts

  rollback_conditions:
    - Major requirement changes discovered
    - Stakeholder alignment lost
    - Critical risk identified without mitigation
    - Resource constraints change significantly